<div class="integrations-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1><i class="ri-key-2-line"></i> Website API Keys</h1>
        <p>Each scraped website has its own unique API key for embedding the chatbot</p>
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="loading-state">
        <div class="loading-spinner">
            <i class="ri-loader-4-line"></i>
            <span>Loading your websites...</span>
        </div>
    </div>

    <!-- Empty State -->
    <div id="empty-state" class="empty-state" style="display: none;">
        <div class="empty-icon">
            <i class="ri-folder-open-line"></i>
        </div>
        <h2>No Websites Scraped Yet</h2>
        <p>Scrape a website from the Dashboard to get started with your chatbot integration</p>
        <a href="../dashboard/dashboard.html" class="btn btn-primary">
            <i class="ri-add-line"></i>
            Go to Dashboard
        </a>
    </div>

    <!-- Websites Grid -->
    <div id="websites-grid" class="websites-grid" style="display: none;">
        <!-- Website cards will be dynamically inserted here -->
    </div>

    <!-- Test Your Integration Section -->
    <section class="integration-test-section" id="test-section" style="display: none;">
        <div class="section-header">
            <i class="ri-test-tube-line"></i>
            <h2>Test Your Integration</h2>
        </div>
        <p class="section-description">Once implemented, test your chatbot to ensure it's working correctly.</p>

        <div class="test-checklist">
            <div class="test-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Chatbot widget appears on the page</span>
            </div>
            <div class="test-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Widget opens when clicked</span>
            </div>
            <div class="test-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Messages are sent and received</span>
            </div>
            <div class="test-item">
                <i class="ri-checkbox-circle-line"></i>
                <span>Responses are relevant and helpful</span>
            </div>
        </div>
    </section>

    <!-- Troubleshooting Section -->
    <section class="troubleshooting-section" id="troubleshooting-section" style="display: none;">
        <div class="section-header">
            <i class="ri-tools-line"></i>
            <h2>Troubleshooting</h2>
        </div>

        <div class="troubleshooting-accordion">
            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion(this)">
                    <i class="ri-error-warning-line"></i>
                    <span>Chatbot widget doesn't appear</span>
                    <i class="ri-arrow-down-s-line accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <ul>
                        <li>Verify the SDK script is placed before the closing <code>&lt;/body&gt;</code> tag</li>
                        <li>Check that the API key is correct and active</li>
                        <li>Open browser console (F12) and check for JavaScript errors</li>
                        <li>Ensure your website allows external scripts to load</li>
                    </ul>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion(this)">
                    <i class="ri-error-warning-line"></i>
                    <span>Widget appears but doesn't respond</span>
                    <i class="ri-arrow-down-s-line accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <ul>
                        <li>Check your internet connection</li>
                        <li>Verify the API key hasn't been regenerated</li>
                        <li>Ensure the website data is still available in your dashboard</li>
                        <li>Check browser console for API errors</li>
                    </ul>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header" onclick="toggleAccordion(this)">
                    <i class="ri-error-warning-line"></i>
                    <span>Responses are not relevant</span>
                    <i class="ri-arrow-down-s-line accordion-icon"></i>
                </button>
                <div class="accordion-content">
                    <ul>
                        <li>Verify you're using the correct website's API key</li>
                        <li>Re-scrape the website to update the content</li>
                        <li>Check that the website content is accessible and properly formatted</li>
                        <li>Try asking more specific questions</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="need-help-box">
            <i class="ri-customer-service-2-line"></i>
            <div>
                <h3>Need Help?</h3>
                <p>If you're still experiencing issues, please contact our support team or check the documentation.</p>
                <div class="help-actions">
                    <button class="btn btn-secondary">
                        <i class="ri-book-line"></i> View Documentation
                    </button>
                    <button class="btn btn-outline">
                        <i class="ri-mail-line"></i> Contact Support
                    </button>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Integration Code Modal -->
<div id="integration-modal" class="modal" style="display: none;">
    <div class="modal-overlay" onclick="closeIntegrationModal()"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="ri-code-s-slash-line"></i> Integration Code</h2>
            <button class="modal-close" onclick="closeIntegrationModal()">
                <i class="ri-close-line"></i>
            </button>
        </div>
        <div class="modal-body">
            <p>Copy this code and paste it into your website's HTML, just before the closing <code>&lt;/body&gt;</code>
                tag:</p>

            <div class="code-block">
                <div class="code-header">
                    <span>HTML</span>
                    <button class="btn btn-icon" onclick="copyIntegrationCode()">
                        <i class="ri-file-copy-line"></i>
                        Copy Code
                    </button>
                </div>
                <pre id="integration-code"><code></code></pre>
            </div>

            <div class="integration-note">
                <i class="ri-information-line"></i>
                <div>
                    <strong>Note:</strong> The chatbot will automatically use the content from the selected website. No
                    additional configuration needed!
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Confirm Regenerate Modal -->
<div id="confirm-regenerate-modal" class="modal" style="display: none;">
    <div class="modal-overlay" onclick="closeRegenerateModal()"></div>
    <div class="modal-content modal-small">
        <div class="modal-header">
            <h2><i class="ri-alert-line"></i> Regenerate API Key?</h2>
            <button class="modal-close" onclick="closeRegenerateModal()">
                <i class="ri-close-line"></i>
            </button>
        </div>
        <div class="modal-body">
            <p>Are you sure you want to regenerate this API key?</p>
            <div class="warning-box">
                <i class="ri-error-warning-line"></i>
                <div>
                    <strong>Warning:</strong> The old API key will stop working immediately. You'll need to update your
                    website integration with the new key.
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeRegenerateModal()">Cancel</button>
            <button class="btn btn-danger" id="confirm-regenerate-btn">
                <i class="ri-refresh-line"></i>
                Regenerate Key
            </button>
        </div>
    </div>
</div>